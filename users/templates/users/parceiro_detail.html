{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 17 de Janeiro de 2020
{% endcomment %}

{% block head %}
  {% load static %}
  {% load certificado_banca %}

  {% comment %} Para recarregar a página em caso de um botão back ou similar {% endcomment %}
  {% include "reload.html" %}
  
  <style>
    #logotipo {
      max-height:128px;
      max-width:128px;
      height:auto;
      width:auto;
      float: right;
    }
  </style>
{% endblock %}

{% block content %}
  
  <span class="titulo">
    {{parceiro.user.get_full_name}}
    {% if parceiro.principal_contato %}
      <span data-toggle="tooltip" data-html="true" animation="true" title="Principal Contato">
        &#x2B50;
      </span>
    {% endif %}
  </span>

  {% if not parceiro.user.is_active %}
      <p style="color: red;">
          - NÃO ATIVO -
      </p><br>
  {% endif %}

  <strong>Usuário:</strong> {{ parceiro.user.username }}<br>
  {% if parceiro.organizacao %}
    <strong>Organização:</strong>
    <a href="{% url 'organizacao_completo' parceiro.organizacao.id %}">
      {{parceiro.organizacao.nome}}
    </a>
    <br>
  {% endif %}

  {% if parceiro.user.tipo_lingua > 1 %}
    <strong>
      Linguagem de comunicação: 
      {% if parceiro.user.tipo_lingua == 2 %}
        <span style="color: red;">
          Inglês
        </span>
      {% endif %}    
      <br>
    </strong>
  {% endif %}
  
  {% if parceiro.cargo %}
      <strong>Cargo:</strong> {{parceiro.cargo}}<br>
  {% endif %}
  {% if parceiro.user.linkedin %}
    <strong>LinkedIn:</strong> <a href="{{parceiro.user.linkedin}}" target="_blank">{{parceiro.user.linkedin}}</a><br>
  {% endif %}
  <strong>e-mail:</strong> <a href="mailto:{{parceiro.user.email}}"> &lt;{{parceiro.user.email}}&gt;</a><br>
  &nbsp;
  {% if parceiro.user.telefone %}&nbsp;&nbsp;&nbsp;&nbsp;&#x260F; 
    <a href="tel:{{parceiro.user.telefone}}">{{parceiro.user.telefone}}</a>&nbsp;<br>
  {% endif %}

  {% if parceiro.user.celular %}&nbsp;&nbsp;&nbsp;&nbsp;&#x1F4F1;
    <a href="tel:{{parceiro.user.celular}}">{{parceiro.user.celular}}</a>&nbsp;
    <a href="https://wa.me/{{parceiro.user.celular|cut:' '}}"><img src="{% static 'images/whatsapp.svg' %}" alt="whatsapp" style="width:16px;height:16px;"></a>
    <br>
  {% endif %}
  
  {% if parceiro.user.instant_messaging %}&nbsp;&nbsp;&nbsp;&nbsp;<img src="{% static 'images/skype.png' %}" alt="instant_messaging" style="width:16px;height:16px;">
    {% comment %} <a href="instant_messaging:{{parceiro.instant_messaging}}">{% endcomment %}{{parceiro.user.instant_messaging}}{% comment %}</a>{% endcomment %}&nbsp;<br> 
  {% endif %}
  <p>&nbsp;</p>

  {% if parceiro.user.observacoes %}
      <strong>Observações:</strong>
      <div style="display: block; padding-left: 18px">
      {{parceiro.user.observacoes|linebreaks}}
      </div>
  {% endif %}

  {% if conexoes %}
    <hr>
    <h3>Conexões com Projetos</h3>
    <ol>

    {% for conexao in conexoes %}
      {% if conexao.projeto %}
        <li><a href="{% url 'projeto_completo' conexao.projeto.id %}">
        {{conexao.projeto.get_titulo}}
        [{{conexao.projeto.ano}}.{{conexao.projeto.semestre}}] -&gt;
        {% for papel in conexao.get_papeis %}[{{papel.0}}] {% endfor %}
        </a></li>
      {% else %}
        PROBLEMA AO RECUPERAR PROJETO!
      {% endif %}
    {% endfor %}
    
    </ol>
  {% endif %}

  {% if aulas %}
    <hr>
    <h4>Aula(s) Ministrada(s)</h4>
    <ol>
      {% for aula in aulas %}
        <li> {{aula.startDate}} - {{aula.descricao}} </li>
      {% endfor %}
    </ol>
  {% endif %}

  {% if mentorias %}
    <hr>
    <h4>Mentoria nos Projetos</h4>
    <ol>
    {% for mentoria in mentorias %}
      <li>
      <a href="{% url 'dinamicas_editar' mentoria.id %}">
      {{mentoria.projeto.get_titulo}}
      [{{mentoria.projeto.ano}}.{{mentoria.projeto.semestre}}]
      em {{mentoria.startDate}}
      </a>
      </li>
    {% endfor %}
    </ol>
  {% endif %}

{% if bancas %}
    <hr>
    <h4>Participação em Banca(s)</h4>
    <ol>
    {% for banca in bancas %}
        <li>
          <a href="{% url 'banca_ver' banca.id %}">
          {% if banca.tipo_de_banca == 2 %}
            Certificação Falconi,
          {% else %}
            Desconhecido,
          {% endif %}
          {% if banca.startDate %}
            {{banca.startDate.date}},
          {% endif %}
          </a>
          {% if banca.projeto %}
            <a href="{% url 'projeto_completo' banca.projeto.id %}">
              {% if banca.projeto.titulo_final %}
                {{banca.projeto.titulo_final}}</a>,
              {% else %}
                {{banca.projeto.titulo}}</a>,
              {% endif %}
          {% endif %}
          {% if banca.projeto.organizacao %}
            <a href="{% url 'organizacao_completo' banca.projeto.organizacao.id %}">
              {{ banca.projeto.organizacao.nome }}
            </a>
          {% endif %}
          {% with certificado=banca|certificado_banca:parceiro.user %}
            {% if certificado %}
              <a href="{{certificado}}" target="_blank" rel="noopener noreferrer">[CERTIFICADO]</a><br>
            {% endif %}
          {% endwith %}
        </li>
    {% empty %}
      Bancas não encontrados
    {% endfor %}
    </ol>
  {% endif %}

  {% if user.tipo_de_usuario == 4 %}
    <a href="{% url 'edita_usuario' parceiro.user.id %}">
      <button class="btn btn-primary" style="float: right;">Editar</button>
    </a>
  {% endif %}
  
{% endblock %}