{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 4 de Fevereiro de 2021
{% endcomment %}


{% comment %} Rever e usar só um {% endcomment %} 


{% if edicoes %}
  <script>

     function recarregar_pagina() {
      $("#spinner").css("visibility", "visible");
      {% if not sem_edicao %}
        var edicao = $("#filterEdicao option:selected").attr("value");
      {% endif %}
      {% if com_cursos %}
        var curso = $("#filterCurso option:selected").attr("value");
      {% endif %}
      {% if com_individual %}
        var individual = $("#filterCurso option:selected").attr("value");
      {% endif %}
      $.ajax({
          type: "POST",
          //url: "Normalmente a mesma página",
          data: {
              {% if not sem_edicao %}
                edicao: edicao,
              {% endif %}
              {% if com_cursos %}
                curso: curso,
              {% endif %}
              'csrfmiddlewaretoken': '{{ csrf_token }}',
          },
          success: function(response){
              $(".atualizar").replaceWith($(".atualizar",response));
              carrega_pagina();
              $("#spinner").css("visibility", "hidden");
          },
          error: function(response) {
              console.log('error')
          }
      });
    }

    $(".filter").change(recarregar_pagina);

  </script>

{% endif %}