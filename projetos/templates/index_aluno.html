{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 15 de Maio de 2019
{% endcomment %}

{% block head %}
    <style>

        #projeto {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            font-size: 17px;
        }
        
        #projeto.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        #vencido {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            font-size: 17px;
        }
        
        #vencido.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        

        #liberado {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            font-size: 17px;
        }
        
        #liberado.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @-webkit-keyframes fadein {
            from {bottom: 0; opacity: 0;} 
            to {bottom: 30px; opacity: 1;}
        }
        
        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        
        @-webkit-keyframes fadeout {
            from {bottom: 30px; opacity: 1;} 
            to {bottom: 0; opacity: 0;}
        }
        
        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }
    </style>
{% endblock %}

{% block content %}

    <a {% if not projeto %} class="disabled" onclick="myFunction('projeto')" {% else %} href="{% url 'meuprojeto' %}" {% endif %} >
        <h5>Meu Projeto</h5>
    </a>
    <hr>

    <a href="{% url 'areas_interesse' %}">
        <h5>Selecionar Áreas de Interesse</h5>
    </a>
    
    <a href="{% url 'submissao' %}">
        <h5>Formulário de Informações Adicionais</h5>
    </a>

    <a 
        {% if vencido %}
            class="disabled" onclick="myFunction('vencido')" 
        {% elif not configuracao.liberadas_propostas %}
            class="disabled" onclick="myFunction('liberado')" 
        {% else %}
            href="{% url 'selecao_propostas' %}" 
        {% endif %} >
        <h5>Selecionar Propostas de Projetos</h5>
    </a>

    <font color="red">Prazo para a seleção dos projetos {{ano}}.{{semestre}}:
        <b>
        {% if configuracao.liberadas_propostas %}
            {{configuracao.prazo}}
        {% else %}
            ainda não liberado
        {% endif %}
        </b>
    </font>
    <hr>
    <a {% if not projeto %} class="disabled" onclick="myFunction('projeto')" {% else %} href="{% url 'minhas_bancas' %}" {% endif %} >
        <h5>Horário das bancas</h5>
    </a>
    
    <a {% if not projeto and user.tipo_de_usuario == 1 %} class="disabled" onclick="myFunction('projeto')" {% else %} href="{% url 'encontros_marcar' %}" {% endif %} > <!-- tipo_de_usuario == 1 é aluno -->
        <h5>Agendar horário das dinâmicas</h5>
    </a>

    <!-- a href=" reembolso " > <h5> Pedido de Reembolso </h5> < / a >  -->

    <div id="projeto">Você não está alocado em um projeto.</div>
    <div id="vencido">Prazo para a seleção dos projetos vencido.</div>
    <div id="liberado">Propostas ainda não liberadas.</div>
    
    <script>
        function myFunction(mensagem) {
            var x = document.getElementById(mensagem);
            x.className = "show";
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
            {% if user.tipo_de_usuario == 2 or user.tipo_de_usuario == 4 %}
                if(mensagem=="projeto") {
                    window.location='{% url 'meuprojeto' %}';
                } else {
                    window.location='{% url 'professor_detail' professor_id %}';
                }   
            {% endif %}
        }
    </script>

{% endblock %}