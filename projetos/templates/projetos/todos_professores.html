{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 18 de Novembro de 2019
{% endcomment %}

{% block head %}
  {% load static %}
  <script src="https://www.w3schools.com/lib/w3.js"></script>
{% endblock %}

{% block content %}
  <h3>Professores</h3>
  {% if professores %}
    <table id="OrganizacoesTable">
      <tr>
        <th onclick="w3.sortHTML('#OrganizacoesTable', '.item', 'td:nth-child(1)')" style="cursor:pointer" class="text-center">Nome</th>
        <th onclick="w3.sortHTML('#OrganizacoesTable', '.item', 'td:nth-child(2)')" style="cursor:pointer" class="text-center">e-mail</th>
        <th onclick="w3.sortHTML('#OrganizacoesTable', '.item', 'td:nth-child(3)')" style="cursor:pointer" class="text-center">Bancas</th>
        <th onclick="w3.sortHTML('#OrganizacoesTable', '.item', 'td:nth-child(4)')" style="cursor:pointer" class="text-center">Projetos</th>
        <th class="text-center">Lattes</th>
      </tr>
      {% for professor in professores %} 
      <tr class="item">
          <td>
            {% if professor.user.membro_comite %} <u> {% endif %}
              <a href="{% url 'professor_detail' professor.id %}">
                {{professor.user.get_full_name}}
              </a>
            {% if professor.user.membro_comite %} <u> {% endif %}
            
          </td>
          <td>
            <a href="mailto:{{professor.user.email}}"> &lt;{{professor.user.email}}&gt;</a><br>
          </td>
          <td class="text-center">
            {{professor.user.membro1.count|add:professor.user.membro2.count|add:professor.user.membro3.count|stringformat:"02d" }}
          </td>
          <td class="text-center">
            {{professor.professor_orientador.count|stringformat:"02d"}}
          </td>
          <td >
            {% if professor.lattes %}
              <a rel="noopener noreferrer" target="_blank" href="{{professor.lattes}}"> {{professor.lattes}} </a>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
    <small>usuários <u>sublinhados</u> são membros do comitê do PFE.</small> 
  {% else %}
    <p>Não existem professores cadastradas.</p>
  {% endif %}
  <p>&nbsp;</p>
{% endblock %}