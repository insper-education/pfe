{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 13 de Janeiro de 2020
{% endcomment %}

{% block head %}
  <script src="https://www.w3schools.com/lib/w3.js"></script>
{% endblock %}

{% block content %}

  {% url 'projeto_feedback' as feedback_url%}

  <span class="titulo">Listagem de Feedbacks das Organizações Parceiras</span>
  <br>
  Link para pesquisa: <a href="{{ feedback_url }}">{{ SERVER_URL }}{{ feedback_url }}</a><br><br>
  
  <!-- VER: https://stackoverflow.com/questions/53202862/trying-to-sort-tables-with-w3-js-but-its-not-sorting-numbers-properly -->

  {% if feedbacks %}
    <table id="FeedbacksTable">
      <tr>
        <th>ver</th>
        <th onclick="w3.sortHTML('#FeedbacksTable', '.item', 'td:nth-child(2)')" style="cursor:pointer" class="text-center">Nome</th>
        <th style="cursor:pointer" class="text-center">e-mail</th>
        <th onclick="w3.sortHTML('#FeedbacksTable', '.item', 'td:nth-child(4)')" style="cursor:pointer" class="text-center">Organização</th>
        <th onclick="w3.sortHTML('#FeedbacksTable', '.item', 'td:nth-child(5)')" style="cursor:pointer" class="text-center">Data</th>
      </tr>      
      {% for feedback in feedbacks %} 
        <tr class="item">
          <td class="text-center">
            <a href="{% url 'mostra_feedback' feedback.id %}">
              &#x1f441;
            </a>
          </td>
          <td>
            {% if feedback.nome %}
              {{feedback.nome}}
            {% else %}
              Anônimo
            {% endif %}
          </td>
          <td>
            {% if feedback.email %}
              {{feedback.email}}
            {% else %}
              Anônimo
            {% endif %}
          </td>
          <td>
            {% if feedback.empresa %}
              {{feedback.empresa}}
            {% else %}
              Anônimo
            {% endif %}
          </td>
          <td>
            {{feedback.data|date:"Y.m.d"}}
          </td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>Não existem feedbacks disponíveis.</p>
  {% endif %}

  <p>&nbsp;</p>
  <p>&nbsp;</p>

{% endblock %}