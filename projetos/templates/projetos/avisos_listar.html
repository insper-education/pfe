{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 18 de Outubro de 2019
{% endcomment %}

{% block head %}
  {% load date_extras %}
{% endblock %}

{% block content %}
  <h3>Avisos</h3><br>

  <label for="filter">Filtro:</label>
  <select id="cxi" class="filter" data-tableId="projetos">
    <option value="todos" {% if periodo == "todos" %}selected="selected"{% endif %}>todos</option>
    <option value="comite" {% if periodo == "comite" %}selected="selected"{% endif %}>Comitê PFE</option>
    <option value="alunos" {% if periodo == "alunos" %}selected="selected"{% endif %}>Alunos</option>
    <option value="orientadores" {% if periodo == "orientadores" %}selected="selected"{% endif %}>Orientadores</option>
    <option value="organizacoes" {% if periodo == "organizacoes" %}selected="selected"{% endif %}>Organizações</option>
  </select>
  <br><br><br>

  {% if avisos %}
    <table>
        <tr>
          <th>
            Dias
          </th>
          <th>
            Data
          </th>
          <th>
            Título
          </th>
        </tr>
  
      {% for a in avisos %} 
        <tr class="{% if a.delta < dias_passados %}text-success{% else %}text-info{% endif %}"
            data-type="XXX" >
          <td>
            {{a.delta}}
          </td>
          <td>
            {{ configuracao.t0|plus_days:a.delta  }}
          </td>
          <td>
            {{a.titulo}}
          </td>
        </tr>
      {% endfor %}
    </table>
    <p>&nbsp;</p>
  {% else %}
    <p>Não existem avisos.</p>
  {% endif %}
  <p>&nbsp;</p>


  <script type="text/javascript">

    function filtra_data() {  // REFERENTE AO SELETOR DE DATAS
      var filterValue = $('.filter').val();
      var row = $('.row'); 
      row.hide();

      row.each(function(i, el) {
        
        if( filterValue == "todas" || filterValue == $(el).attr('data-type') ) {
            $(el).show();
        }

      });

    }

    /*
    function mostra_grafico() { // REFERENTE AO PIE CHART
    }
    */

    $(".filter").change(function(){
      filtra_data();
      //mostra_grafico();
    });  

    $(document).ready(function(){
      filtra_data();
      //mostra_grafico();
    });
  
  </script>

{% endblock %}