{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 14 de Novembro de 2019
{% endcomment %}

{% block head %}
<script>
  $(document).ready(function () {     
    $('#projeto').change(function(){
      var titulo = $(this).children(':selected').data('titulo');
      var organizacao = $(this).children(':selected').data('organizacao');
      var orientador = $(this).children(':selected').data('orientador');
      $('#titulo').text(titulo);
      $('#organizacao').text(organizacao);
      $('#orientador').text(orientador);
    })
  });
</script>
{% endblock %}

{% block content %}

  {% if projetos %}
    <form method="post" id="criarbancasform" enctype="multipart/form-data">
      {% csrf_token %}
      <label for="projeto">Projeto:</label>
      <select name="projeto" id="projeto" title="Selecione o projeto"
      style="width:700px;" required>
          <option disabled selected value> -- selecione um projeto -- </option>
          {% for projeto in projetos %}
            <option value="{{projeto.id}}"
            data-titulo="{{projeto.titulo}}"
            data-organizacao="{{projeto.organizacao}}"
            data-orientador="{{projeto.orientador}}"
            >
              {{projeto.ano}}.{{projeto.semestre}} -
              {{projeto.titulo}}
              ({{projeto.organizacao}})
              [{{projeto.orientador}}]
            </option>  
          {% endfor %}
      </select><br><br>

      Título: <label id="titulo" name="titulo"></label><br>
      Organização: <label id="organizacao" name="organizacao"></label><br>
      Orientador: <label id="orientador" name="orientador"></label><br>

      <br>
      Tipo de banca:<br>
      &nbsp;&nbsp;<input id="tipo0" type="radio" name="tipo" value="0"> <label for="tipo0">Final</label><br>
      &nbsp;&nbsp;<input id="tipo1" type="radio" name="tipo" value="1"> <label for="tipo1">Intermediária</label><br>

      <br>
      <div >
        <label for="inicio">Inicio:</label> <input id="inicio" type = "datetime-local" name="inicio">
        &nbsp;&nbsp;&nbsp;&nbsp;
        <label for="fim">Fim:</label> <input id="fim" type = "datetime-local" name="fim">
      </div><br>

      <label for="local">Local:</label> <input id="local" name="local" type="text" size="48"/><br>
      <br>

      <label for="link">Link de Vídeo-conferência:</label> <input id="link" name="link" type="text" size="40"/><br>
      <br>

      <label for="membro1">Membro 1 da Banca:</label>
      <select name="membro1" id="membro1" title="Selecione membro da banca">
          <option disabled selected value> -- selecione um membro da banca -- </option>
          {% for professor in pessoas %}
            <option value="{{professor.id}}">
              {{professor}}
            </option>  
          {% endfor %}
      </select><br>

      <label for="membro2">Membro 2 da Banca:</label>
      <select name="membro2" id="membro2" title="Selecione membro da banca">
          <option disabled selected value> -- selecione um membro da banca -- </option>
          {% for professor in pessoas %}
            <option value="{{professor.id}}">
              {{professor}}
            </option>  
          {% endfor %}
      </select><br>

      <label for="membro3">Membro 3 da Banca:</label>
      <select name="membro3" id="membro3" title="Selecione membro da banca">
          <option disabled selected value> -- selecione um membro da banca -- </option>
          {% for professor in pessoas %}
            <option value="{{professor.id}}">
              {{professor}}
            </option>  
          {% endfor %}
      </select><br>

      <br><br>
      <button type="submit">Agendar</button>
      <p>&nbsp;</p>
    </form>
  {% else %}
    <p>Não existem projetos disponíveis para marcar uma banca.</p>
  {% endif %}
  <p>&nbsp;</p>

{% endblock %}