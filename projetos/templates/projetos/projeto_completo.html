{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 15 de Maio de 2019
{% endcomment %}

{% block head %}
{% endblock %}

{% block content %}
  {% if projeto.titulo_final %}
    <style>
        h3 {display: inline;}
    </style>
    <h3>Título: {{projeto.titulo_final}}</h3>
    <small> <br>&nbsp;&nbsp;&nbsp;&nbsp;Título Provisório: {{projeto.titulo}}</small><br>
  {% else %}
    <h3>Título: {{projeto.titulo}}</h3>
  {% endif %}
  <strong>Semestre:</strong> {{projeto.ano}}.{{projeto.semestre}}<br>
  {% if projeto.avancado %}
    <strong style="color:red"><u>PFE Avançado</u></strong><br>
  {% endif %}
  <br>

  <strong>Descrição:</strong> {{ projeto.descricao|linebreaks }}
  {% if projeto.expectativas %}
    <strong>Expectativas de resultados/entregas :</strong> {{ projeto.expectativas|linebreaks }}
  {% endif %}  
  {% if projeto.areas %}
    <strong>Áreas da engenharia envolvidas no projeto (habilidade necessárias):</strong> {{ projeto.areas|linebreaks }}
  {% endif %}
  {% if projeto.recursos %}
    <strong>Recursos a serem disponibilizados aos Alunos :</strong> {{ projeto.recursos|linebreaks }}
  {% endif %}
  {% if projeto.anexo %}
    <strong>Anexo :</strong>
    <a class="text-success" href="../..{{MEDIA_URL}}{{projeto.anexo}}">{{projeto.anexo}}</a>
  {% endif %}
  <hr>

  <h3>Empresa: <a href="{% url 'organizacao_completo' projeto.empresa.login %}">{{ projeto.empresa.nome_empresa }}</a></h3>
  <p><strong>endereço:</strong> <a class="tabulado" href="http://maps.google.com/maps?q={{projeto.empresa.endereco}}">{{ projeto.empresa.endereco|linebreaks }}</a></p>
  {% if projeto.empresa.website %}
    <p><strong>website:</strong>  <a class="tabulado" href="{{ projeto.empresa.website }}"> {{ projeto.empresa.website }} </a></p>
  {% endif %}  
  {% if projeto.empresa.informacoes %}
    <strong>Informações sobre a empresa :</strong> {{ projeto.empresa.informacoes|linebreaks }}
  {% endif %}
  {% if projeto.departamento %}
    <strong>Informações sobre o departamento na empresa :</strong> {{ projeto.departamento|linebreaks }}
  {% endif %}

  {% if projeto.orientador %}
  <hr>
  <h3>Orientadores</h3>
  <ul>
    <a href="{% url 'professor_detail' projeto.orientador.id %}">
      <li>{{ projeto.orientador.user.first_name }} {{ projeto.orientador.user.last_name }}</li>
    </a>
  </ul>
  {% endif %}

  <hr>
  <h3>Alunos Alocados no Projeto</h3>
  {% for alocacao in projeto.alocacao_set.all %}
    <a href="{% url 'aluno_detail' alocacao.aluno.id %}"><p>{{alocacao.aluno.user.first_name}} {{alocacao.aluno.user.last_name}} &lt;{{alocacao.aluno.user.email}}&gt; [{{ alocacao.aluno.get_curso_display }}]</p></a>
  {% endfor %}

  <hr>
  <h3>Alunos Aplicando para o Projeto</h3>
  {% for opcao in projeto.opcao_set.all %}
    {% if projeto.ano == opcao.aluno.anoPFE and projeto.semestre == opcao.aluno.semestrePFE %}
    <a href="{% url 'aluno_detail' opcao.aluno.id %}"><p class="{% if opcao.prioridade <= 5 %}green-bold{% else %}yellow-bold{% endif %}">{{opcao.aluno.user.first_name}} [{{ opcao.aluno.get_curso_display }}]&nbsp;=>&nbsp;prioridade #{{opcao.prioridade}}&nbsp;|&nbsp;{ {{opcao.aluno.anoPFE}}.{{opcao.aluno.semestrePFE}} }</p></a>
    {% endif %}
  {% endfor %}
  <p style="line-height:2px">
    ------------------------------------------------------------------------------------------
  </p>
  {% for opcao in projeto.opcao_set.all %}
    {% if projeto.ano != opcao.aluno.anoPFE or projeto.semestre != opcao.aluno.semestrePFE %}
    <a href="{% url 'aluno_detail' opcao.aluno.id %}"><p class="red-bold">{{opcao.aluno.user.first_name}} [{{ opcao.aluno.get_curso_display }}]&nbsp;=>&nbsp;prioridade #{{opcao.prioridade}}&nbsp;|&nbsp;{ {{opcao.aluno.anoPFE}}.{{opcao.aluno.semestrePFE}} } </p></a>
    {% endif %}
  {% endfor %}

  <br><hr>
  <h3>Perfil de Alunos Desejados para Projeto</h3>
  <table>
    <tr>
        <th style="text-align:center" >
            Aluno
        </th>
        <th style="text-align:center" >
            Computação
        </th>
        <th style="text-align:center" >
            Mecânica
        </th>
        <th style="text-align:center" >
            Mecatrônica
        </th>
    </tr>
    <tr> <!-- NAO EH A FORMA MAIS ELEGANTE MAS FUNCIONA POR ENQUANTO -->
      <td>Aluno 1</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno1_computacao %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno1_mecanica %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno1_mecatronica %}checked{% endif %}>&nbsp;</td>
    </tr>
    <tr>
      <td>Aluno 2</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno2_computacao %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno2_mecanica %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno2_mecatronica %}checked{% endif %}>&nbsp;</td>
    </tr>
    <tr>
      <td>Aluno 3</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno3_computacao %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno3_mecanica %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno3_mecatronica %}checked{% endif %}>&nbsp;</td>
    </tr>
    <tr>
      <td>Aluno 4</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno4_computacao %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno4_mecanica %}checked{% endif %}>&nbsp;</td>
      <td style="text-align:center">&nbsp;<input type="checkbox" name="selection" value="{{projeto.id}}" 
        {% if projeto.perfil_aluno4_mecatronica %}checked{% endif %}>&nbsp;</td>
    </tr>
  </table>

  {% if projeto.recomendada_set.all %}
  <br><hr>
  <h3>Disciplina(s) Recomendada(s)</h3>
  <table>
    <tr>
      <th>
        Disciplina
      </th>
    </tr>
    {% for rec in projeto.recomendada_set.all %}
    <tr><td>
        {{rec.disciplina.nome}}
    </td></tr>
    {% endfor %}
  </table>
  {% endif %}

  <br><hr>

{% endblock %}