{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 4 de Setembro de 2019
{% endcomment %}

{% block head %}
  {% load static %}
  {% include "tabelas_includes.html" %}
{% endblock %}

{% block content %}

  {% include "impressora.html" %}

  <span class="titulo">Alocação de Orientadores</span>

  {% include "edicoes.html" %}

  <div class="atualizar">

    <div class="table-responsive">

        <table id="OrientacoesTable" class="table table-bordered table-hover table-sm" style="width: auto;">
          <thead class="table-info">
            <tr>
              <th scope="col" style="text-align: center;width:300px;"><span style="margin-right: 0.6ex;">Nome</span></th>
              <th scope="col" style="text-align: center;width:70px;"><span style="margin-right: 0.6ex;">Grupos</span></th>
              <th scope="col" style="text-align: center;width:auto;"><span style="margin-right: 0.6ex;">Projetos</span></th>
            </tr>
          </thead>
          {% for professor, grupos in orientacoes %} 

            <tr class="item">
              <td>
                <a class="imprimir" href="{% url 'professor_detail' professor.id %}">{{professor.user.get_full_name}}</a> <a href="mailto:{{professor.user.email}}">&lt;{{professor.user.email}}&gt;</a>
              </td>
              <td style="text-align: center;"> 
                {{grupos|length}}
              </td>
              <td style="text-align: left;">{% for grupo in grupos %}<p>&bull; [{{grupo.ano}}.{{grupo.semestre}}] {{grupo.get_titulo}} ({{grupo.organizacao}}) { {{ grupo.alocacao_set.all.count }} estudante(s) }<br></p>{% endfor %}</td>
            </tr>
          {% endfor %}
        </table>
        <br>

    </div>

    <p>&nbsp;</p>
    <p>&nbsp;</p>

    <script>
      function carrega_pagina() {
      };
      window.onload = carrega_pagina
    </script>

  </div>

  {% with tabela='Orientacoes' %}
      {% include "edicoes_ajax.html" %}
  {% endwith %}

{% endblock %}