{% extends "base.html" %}
{% comment %}
    Desenvolvido para o Projeto Final de Engenharia
    Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
    Data: 26 de Janeiro de 2022
{% endcomment %}

{% block head %}
<style>
textarea {
  max-width:100%;
}
</style>
{% endblock %}

{% block content %}

  {% if mensagem %}
    <h2 class="red-bold">{{mensagem}}</h2>
  {% endif %}

  <span class="titulo">Formulário de Relato Quinzenal</span>
  <br>

  <form action="" method="post"> {% csrf_token %}

    Prazo para a submissão do relato: <b style='color:red;'>
    {% if prazo %}
      {{prazo.endDate}}
    {% else %}
      Não há mais datas para relatos.
    {% endif %}
    </b>
    <br><br>

    <label for="relato">Informe seu relato quinzenal (máximo {{ max_length|add:"-100" }} caracteres).</label><br>
    <textarea id="relato" name="relato" rows="18" cols="160" maxlength="{{ max_length|add:"-10" }}" {% if not prazo %}disabled{% endif %} 
              placeholder="Descreva brevemente as SUAS contribuições para o projeto, quais foram os SEUS aprendizados, quais competências VOCÊ desenvolveu nesse último período. Se quiser você também pode fazer um breve reflexão em como poderiam contribuir de forma mais eficiente para o projeto nas próximas semanas. Indique a quantidade de horas aproximada que você dedicou ao projeto desde o último relato quinzenal."
      >{% if relato %}{{relato}}{% endif %}</textarea>
    
    <br><br>
    <input  {% if not prazo %}disabled{% endif %} type="submit" value="Enviar">

  </form>

  {% if relatos %}

    <p>&nbsp;</p>
    <hr>
    <p>&nbsp;</p>

    <h5>Relatos Anteriores:</h5><br>
    {% for item in relatos %}
      <b>{{item.momento}}</b>&nbsp;&nbsp;&nbsp;
      Situação: 
      {% if item.avaliacao == -1 %}aguardando orientador{% endif %}
      {% if item.avaliacao == 0 %}desempenho abaixo do esperado{% endif %}
      {% if item.avaliacao == 1 %}desempenho dentro do esperado{% endif %}
      <br>
      <textarea rows="18" cols="160" disabled>{{item.texto}}</textarea><br><br>
    {% endfor %}

  {% endif %}

  <p>&nbsp;</p>
  <p>&nbsp;</p>

{% endblock %}