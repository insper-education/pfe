{% extends "base.html" %}
{% comment %}
  Desenvolvido para o Projeto Final de Engenharia
  Autor: Luciano Pereira Soares <lpsoares@insper.edu.br>
  Data: 11 de Outubro de 2025
{% endcomment %}

{% load static %}
{% load i18n %}
{% load l10n %}
{% load linguas %}

{% block head %}
  <script src="{% static 'js/sort.js' %}"></script>
{% endblock %}

{% block content %}

  <h4>{% lng "Objetivos de Aprendizagem e Rubricas" "Learning Goals and Rubrics" %}</h4>
  {% include "professores/includes/tabela_objetivos_rubricas.html" %}
  <br><br>

  <h4>{% lng "Exames e Pesos" "Exams and Weights" %}</h4>
  {% include "tabelas_top_ml.html" with tabela="ExamesPesos" cabecalhos=cabecalhos tabela_simples=True %}
    {% for composicao in composicoes %}
      <tr>
        <td>{{composicao.exame}}</td>
        <td>
          <script> peso_tmp = 0; </script>
          {% for peso in composicao.peso_set.all %}                    
            {% if peso.objetivo %}[<span data-toggle="tooltip" data-placement="bottom" title="{{peso.objetivo.titulo}}">{{peso.objetivo.sigla}}{% else %}<span>[Ãšnica{% endif %}={% lng_2 peso.peso %}%</span>]
            {% if peso.peso %}
              <script> peso_tmp += {{peso.peso|unlocalize}}; </script>
            {% endif %}
          {% endfor %}
        </td><td>
          <b id="m{{forloop.counter0}}" style="display: inline-block; width: 4em; text-align:right;"></b>
        </td>
        <script> document.getElementById("m{{forloop.counter0}}").innerHTML = peso_tmp.toFixed(2)+"%"; </script>
      </tr>
    {% endfor %}
    <caption>
      <small>
        {% for o in objetivos_avaliados %}
          <b>{{o.sigla}}</b>: {{o.titulo}}
          {% if not forloop.last %}|{% endif %}
        {% endfor %}
      </small>
    </caption>
  {% include "tabelas_bottom.html" %}

{% endblock %}
